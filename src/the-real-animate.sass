@import 'animate-css-bank.scss'

// Config
$__animateDuration: 1000ms !default
$__animateUsedKeyframes: () !default

// Mixin
=animate($name, $duration: $__animateDuration)
  $extraProps: false
  // Check bank
  @if map-has-key($__animationBank, $name)

    // Check if keyframe is already rendered
    @if not index($__animateUsedKeyframes, $name)
      $__animateUsedKeyframes: append($__animateUsedKeyframes, $name) !global

      // Create keyframe entry
      @keyframes #{$name}
        @each $stop, $styles in map-get($__animationBank, $name)
          @if $stop != default
            #{$stop}
              @each $prop, $value in $styles
                #{$prop}: if(type-of($value) == string, unquote($value), $value)
          @else
            $extraProps: $styles

    // Set animation properties on element
    animation-name: $name
    animation-duration: $duration

    // Add extra animation defaults
    @if $extraProps
      @each $prop, $value in $extraProps
        #{$prop}: $value

  @else
    @error '\'#{$name}\' not found in animation bank.'
